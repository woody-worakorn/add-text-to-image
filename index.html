<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>:D</title>
    <style>
      body {
        margin: 0 auto;
        text-align: center;
        line-height: 1.5;
      }

      body h1 {
        font-size: 1.5rem;
      }

      form {
        max-width: 750px;
        margin: 0 auto;
        display: grid;
        grid-template-columns: auto 1fr;
        grid-row-gap: 0.5em;
        grid-column-gap: 0.5em;
      }

      label {
        text-align: right;
      }

      input {
        font-size: 100%;
      }

      input[type="text"] {
      }

      canvas {
        border: 1px solid black;
        display: none;
        margin: 0 auto;
      }

      p.tip {
        font-style: italic;
        margin: 1px 0 1em 0;
      }

      .color {
        text-align: right;
      }
    </style>
  </head>
  <body>
    <h1>White hat - ระบบทดสอบการเรียน</h1>
    <form>
       
        <label for="text">ข้อความ:</label>
        <input id="text" type="text" value="[เลขบัตร 13 ตัว] แล้วเว้นวรรคประมาณ 20 ครั้ง [ชื่อสถานประกอบการ]" required>

        <input id="file" type="file" accept="image/*" required hidden>

        <div class="color"><input id="color" type="color" value="#000000" required hidden></div>


        <input id="font" type="text" value="14px sans-serif" required hidden>
 
        <input id="x-position" type="number" min="0" value="911" required hidden>
       
        <input id="y-position" type="number" value="719" min="0" required hidden>


    </form>
    <p class="tip">(*) เสร็จแล้วคลิกขวา บันทึกได้เลย</p>
    <div class="container">
      <canvas><p>The website requires HTML Canvas to work, your browser doesn't support it.</p></canvas>
    </div>
    <script>
      const canvas = document.querySelector("canvas");
      const ctx = canvas.getContext("2d");
      const inputFile = document.querySelector("#file");
      const inputText = document.querySelector("#text");
      const inputFont = document.querySelector("#font");
      const inputColor = document.querySelector("#color");
      const inputXPosition = document.querySelector("#x-position");
      const inputYPosition = document.querySelector("#y-position");
      const img = new Image();
      img.src = "bg.png";
      inputFile.onchange = e => {
        const file = inputFile.files[0];
        img.src = URL.createObjectURL(file);
      };
      img.onload = e => {
        canvas.width = img.width;
        canvas.height = img.height;
        canvas.style.display = "block";

        draw();
      };
      inputText.oninput = draw;
      inputFont.onchange = draw;
      inputColor.oninput = draw;

  

      function centerXPosition() {
        ctx.font = inputFont.value;
        const textMetrics = ctx.measureText(inputText.value);
        return Math.floor((canvas.width - textMetrics.width) / 2);
      }

      function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.drawImage(img, 0, 0);
        ctx.fillStyle = inputColor.value;
        ctx.font = inputFont.value;
        ctx.fillText(inputText.value, inputXPosition.value, inputYPosition.value);
      }
    </script>
  </body>
</html>
